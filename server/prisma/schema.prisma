// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Admins {
  id       String @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  username String @unique
  password String

  @@map("admins")
}

model Students {
  nim          String      @unique @db.VarChar(30)
  name         String      @db.VarChar(255)
  departmentId String      @db.Uuid
  department   Departments @relation(fields: [departmentId], references: [id])

  Cards      Cards[]
  Activities Activities[]

  @@map("students")
}

model Departments {
  id       String     @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  name     String     @db.VarChar(255)
  Students Students[]

  @@map("departments")
}

model Cards {
  id            String    @id @unique
  activated_at  DateTime
  last_activity DateTime
  studentId     String?   @db.VarChar(30)
  student       Students? @relation(fields: [studentId], references: [nim])

  @@map("cards")
}

model Activities {
  id        String    @id @default(dbgenerated("uuid_generate_v4()")) @db.Uuid
  date_in   DateTime  @default(now())
  date_out  DateTime?
  studentId String
  student   Students  @relation(fields: [studentId], references: [nim])

  @@map("activities")
}
